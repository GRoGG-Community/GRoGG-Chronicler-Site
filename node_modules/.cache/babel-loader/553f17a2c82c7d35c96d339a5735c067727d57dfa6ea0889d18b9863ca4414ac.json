{"ast":null,"code":"import React,{useRef,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MessageList(_ref){let{messages,selected,account,gmPermissions,handleDeleteMessage}=_ref;const messagesEndRef=useRef(null);useEffect(()=>{if(!selected)return;if(messagesEndRef.current){messagesEndRef.current.scrollIntoView({behavior:'auto'});}},[messages,selected]);if(!selected||!messages)return null;return/*#__PURE__*/_jsxs(\"ul\",{className:\"messages-list\",children:[messages.length===0&&/*#__PURE__*/_jsx(\"li\",{className:\"no-messages\",children:\"No messages yet.\"}),messages.map((msg,i)=>{const[partnerA,partnerB]=selected.split('|');let partnerClass='';if(msg.author===partnerA)partnerClass='message-partnerA';else if(msg.author===partnerB)partnerClass='message-partnerB';return/*#__PURE__*/_jsxs(\"li\",{className:`message-item ${partnerClass}`,style:{display:'flex',alignItems:'stretch',justifyContent:'flex-start',gap:'0.7rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,minWidth:0,display:'flex',flexDirection:'column',gap:'0.15rem',justifyContent:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"message-meta\",style:{marginBottom:0},children:[/*#__PURE__*/_jsx(\"span\",{className:\"message-author\",children:msg.author}),/*#__PURE__*/_jsx(\"small\",{className:\"message-date\",children:new Date(msg.timestamp).toLocaleString()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"message-text\",children:msg.text})]}),account&&account.username===\"GameMaster\"&&gmPermissions.canDeleteMessages&&/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',minWidth:'2.5em',paddingLeft:'0.5em'},children:/*#__PURE__*/_jsx(\"button\",{title:\"Delete message\",style:{background:'none',border:'none',color:'#ff4d4d',cursor:'pointer',fontSize:'1.3em',display:'flex',alignItems:'center',height:'2.2em'},onClick:e=>{e.stopPropagation();handleDeleteMessage(selected,i);},children:/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"Delete\",children:\"\\uD83D\\uDDD1\"})})})]},i);}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]});}","map":{"version":3,"names":["React","useRef","useEffect","jsx","_jsx","jsxs","_jsxs","MessageList","_ref","messages","selected","account","gmPermissions","handleDeleteMessage","messagesEndRef","current","scrollIntoView","behavior","className","children","length","map","msg","i","partnerA","partnerB","split","partnerClass","author","style","display","alignItems","justifyContent","gap","flex","minWidth","flexDirection","marginBottom","Date","timestamp","toLocaleString","text","username","canDeleteMessages","paddingLeft","title","background","border","color","cursor","fontSize","height","onClick","e","stopPropagation","role","ref"],"sources":["C:/Users/Admin/Dokumente/Stellaris/project/StellarisRP-Site/src/components/MessageList.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\r\n\r\nexport default function MessageList({\r\n    messages,\r\n    selected,\r\n    account,\r\n    gmPermissions,\r\n    handleDeleteMessage\r\n}) {\r\n    const messagesEndRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (!selected) return;\r\n        if (messagesEndRef.current) {\r\n            messagesEndRef.current.scrollIntoView({ behavior: 'auto' });\r\n        }\r\n    }, [messages, selected]);\r\n\r\n    if (!selected || !messages) return null;\r\n\r\n    return (\r\n        <ul className=\"messages-list\">\r\n            {messages.length === 0 && <li className=\"no-messages\">No messages yet.</li>}\r\n            {messages.map((msg, i) => {\r\n                const [partnerA, partnerB] = selected.split('|');\r\n                let partnerClass = '';\r\n                if (msg.author === partnerA) partnerClass = 'message-partnerA';\r\n                else if (msg.author === partnerB) partnerClass = 'message-partnerB';\r\n                return (\r\n                    <li\r\n                        key={i}\r\n                        className={`message-item ${partnerClass}`}\r\n                        style={{\r\n                            display: 'flex',\r\n                            alignItems: 'stretch',\r\n                            justifyContent: 'flex-start',\r\n                            gap: '0.7rem'\r\n                        }}\r\n                    >\r\n                        <div style={{\r\n                            flex: 1,\r\n                            minWidth: 0,\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            gap: '0.15rem',\r\n                            justifyContent: 'center'\r\n                        }}>\r\n                            <div className=\"message-meta\" style={{marginBottom: 0}}>\r\n                                <span className=\"message-author\">{msg.author}</span>\r\n                                <small className=\"message-date\">{new Date(msg.timestamp).toLocaleString()}</small>\r\n                            </div>\r\n                            <div className=\"message-text\">{msg.text}</div>\r\n                        </div>\r\n                        {account && account.username === \"GameMaster\" && gmPermissions.canDeleteMessages && (\r\n                            <div style={{\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                minWidth: '2.5em',\r\n                                paddingLeft: '0.5em'\r\n                            }}>\r\n                                <button\r\n                                    title=\"Delete message\"\r\n                                    style={{\r\n                                        background: 'none',\r\n                                        border: 'none',\r\n                                        color: '#ff4d4d',\r\n                                        cursor: 'pointer',\r\n                                        fontSize: '1.3em',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        height: '2.2em'\r\n                                    }}\r\n                                    onClick={e => {\r\n                                        e.stopPropagation();\r\n                                        handleDeleteMessage(selected, i);\r\n                                    }}\r\n                                >\r\n                                    <span role=\"img\" aria-label=\"Delete\">&#128465;</span>\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </li>\r\n                );\r\n            })}\r\n            <div ref={messagesEndRef} />\r\n        </ul>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}