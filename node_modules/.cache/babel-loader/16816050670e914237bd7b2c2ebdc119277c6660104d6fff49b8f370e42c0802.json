{"ast":null,"code":"import{useState,useRef,useEffect}from'react';export function useBurgerMenu(account){const[showMenu,setShowMenu]=useState(false);const[showPermissions,setShowPermissions]=useState(false);const[showRoadmap,setShowRoadmap]=useState(false);const[gmPermissions,setGmPermissions]=useState(()=>{const saved=localStorage.getItem('stellarisGmPermissions');return saved?JSON.parse(saved):{canDeleteMessages:true};});const menuDropdownRef=useRef(null);const permissionsDropdownRef=useRef(null);useEffect(()=>{localStorage.setItem('stellarisGmPermissions',JSON.stringify(gmPermissions));},[gmPermissions]);function handleMenuToggle(){setShowMenu(v=>!v);setShowPermissions(false);setShowRoadmap(false);}function handleMenuClose(){setShowMenu(false);setShowPermissions(false);setShowRoadmap(false);}function handlePermissionsToggle(){setShowPermissions(v=>!v);}function handleRoadmapToggle(){setShowRoadmap(v=>!v);setShowMenu(false);setShowPermissions(false);}function handlePermissionChange(key,value){setGmPermissions(prev=>({...prev,[key]:value}));}// Close menu only if mouse leaves both dropdowns\nuseEffect(()=>{if(!showMenu&&!showPermissions)return;function handleMouseMove(e){if(menuDropdownRef.current&&permissionsDropdownRef.current&&!menuDropdownRef.current.contains(e.target)&&!permissionsDropdownRef.current.contains(e.target)){setShowMenu(false);setShowPermissions(false);}}document.addEventListener('mousedown',handleMouseMove);return()=>document.removeEventListener('mousedown',handleMouseMove);},[showMenu,showPermissions]);return{showMenu,showPermissions,gmPermissions,showRoadmap,handleMenuToggle,handleMenuClose,handlePermissionsToggle,handlePermissionChange,handleRoadmapToggle,menuDropdownRef,permissionsDropdownRef};}","map":{"version":3,"names":["useState","useRef","useEffect","useBurgerMenu","account","showMenu","setShowMenu","showPermissions","setShowPermissions","showRoadmap","setShowRoadmap","gmPermissions","setGmPermissions","saved","localStorage","getItem","JSON","parse","canDeleteMessages","menuDropdownRef","permissionsDropdownRef","setItem","stringify","handleMenuToggle","v","handleMenuClose","handlePermissionsToggle","handleRoadmapToggle","handlePermissionChange","key","value","prev","handleMouseMove","e","current","contains","target","document","addEventListener","removeEventListener"],"sources":["C:/Users/Admin/Dokumente/Stellaris/project/StellarisRP-Site/src/BurgerMenu.js"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\r\n\r\nexport function useBurgerMenu(account) {\r\n    const [showMenu, setShowMenu] = useState(false);\r\n    const [showPermissions, setShowPermissions] = useState(false);\r\n    const [showRoadmap, setShowRoadmap] = useState(false);\r\n    const [gmPermissions, setGmPermissions] = useState(() => {\r\n        const saved = localStorage.getItem('stellarisGmPermissions');\r\n        return saved ? JSON.parse(saved) : { canDeleteMessages: true };\r\n    });\r\n    const menuDropdownRef = useRef(null);\r\n    const permissionsDropdownRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem('stellarisGmPermissions', JSON.stringify(gmPermissions));\r\n    }, [gmPermissions]);\r\n\r\n    function handleMenuToggle() {\r\n        setShowMenu(v => !v);\r\n        setShowPermissions(false);\r\n        setShowRoadmap(false);\r\n    }\r\n    function handleMenuClose() {\r\n        setShowMenu(false);\r\n        setShowPermissions(false);\r\n        setShowRoadmap(false);\r\n    }\r\n    function handlePermissionsToggle() {\r\n        setShowPermissions(v => !v);\r\n    }\r\n    function handleRoadmapToggle() {\r\n        setShowRoadmap(v => !v);\r\n        setShowMenu(false);\r\n        setShowPermissions(false);\r\n    }\r\n    function handlePermissionChange(key, value) {\r\n        setGmPermissions(prev => ({ ...prev, [key]: value }));\r\n    }\r\n\r\n    // Close menu only if mouse leaves both dropdowns\r\n    useEffect(() => {\r\n        if (!showMenu && !showPermissions) return;\r\n        function handleMouseMove(e) {\r\n            if (\r\n                menuDropdownRef.current &&\r\n                permissionsDropdownRef.current &&\r\n                !menuDropdownRef.current.contains(e.target) &&\r\n                !permissionsDropdownRef.current.contains(e.target)\r\n            ) {\r\n                setShowMenu(false);\r\n                setShowPermissions(false);\r\n            }\r\n        }\r\n        document.addEventListener('mousedown', handleMouseMove);\r\n        return () => document.removeEventListener('mousedown', handleMouseMove);\r\n    }, [showMenu, showPermissions]);\r\n\r\n    return {\r\n        showMenu,\r\n        showPermissions,\r\n        gmPermissions,\r\n        showRoadmap,\r\n        handleMenuToggle,\r\n        handleMenuClose,\r\n        handlePermissionsToggle,\r\n        handlePermissionChange,\r\n        handleRoadmapToggle,\r\n        menuDropdownRef,\r\n        permissionsDropdownRef\r\n    };\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}