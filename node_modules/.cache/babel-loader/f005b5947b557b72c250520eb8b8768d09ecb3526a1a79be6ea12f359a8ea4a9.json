{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{TREATY_STATUS_OPTIONS}from'../utils/treatyStatusOptions';import ActionButton from'./ActionButton';import ModalOverlay from'./ModalOverlay';import FormField from'./FormField';import{ErrorMessage}from'./Messages';import Dropdown from'./Dropdown';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function TreatyDialog(_ref){let{open,mode,data,onSave,onClose,error,saving,empires,accounts,account}=_ref;const[form,setForm]=useState(()=>data?{...data}:{title:'',content:'',participants:[],status:'discussion',owner:(account===null||account===void 0?void 0:account.username)||''});const[showParticipantsDropdown,setShowParticipantsDropdown]=useState(false);const dropdownBtnRef=useRef(null);const dropdownListRef=useRef(null);useEffect(()=>{if(data)setForm({...data});else setForm({title:'',content:'',participants:[],status:'discussion',owner:(account===null||account===void 0?void 0:account.username)||''});},[data,open]);useEffect(()=>{if(!showParticipantsDropdown)return;function handleClick(e){if(dropdownBtnRef.current&&!dropdownBtnRef.current.contains(e.target)&&dropdownListRef.current&&!dropdownListRef.current.contains(e.target)){setShowParticipantsDropdown(false);}}document.addEventListener('mousedown',handleClick);return()=>document.removeEventListener('mousedown',handleClick);},[showParticipantsDropdown]);useEffect(()=>{if(!showParticipantsDropdown)return;function handleKey(e){if(e.key===\"Escape\")setShowParticipantsDropdown(false);}document.addEventListener('keydown',handleKey);return()=>document.removeEventListener('keydown',handleKey);},[showParticipantsDropdown]);if(!open)return null;const isEdit=mode==='edit';function toggleParticipant(name){setForm(f=>{const exists=f.participants.includes(name);return{...f,participants:exists?f.participants.filter(p=>p!==name):[...f.participants,name]};});}return/*#__PURE__*/_jsxs(ModalOverlay,{onClose:onClose,children:[/*#__PURE__*/_jsx(\"h2\",{children:isEdit?'Edit Treaty':'New Treaty'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();onSave(form);},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'1.2rem',marginBottom:'1.2rem'},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(FormField,{label:\"Title:\",name:\"title\",value:form.title,onChange:e=>setForm(f=>({...f,title:e.target.value})),required:true,disabled:saving})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(FormField,{label:\"Status:\",name:\"status\",as:\"select\",value:form.status,onChange:e=>setForm(f=>({...f,status:e.target.value})),options:TREATY_STATUS_OPTIONS,disabled:saving})}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'bold',color:'var(--accent)',marginBottom:0.15},children:\"Participants:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"participants-dropdown\",ref:dropdownBtnRef,tabIndex:0,style:{userSelect:'none',background:'var(--primary-bg)',border:'1px solid var(--border)',borderRadius:8,padding:'0.7rem 1rem',minHeight:'2.2rem',maxWidth:'100%',width:'100%',cursor:saving?'not-allowed':'pointer',marginBottom:'0.7rem',position:'relative',display:'flex',alignItems:'center',justifyContent:'space-between',overflow:'hidden'},onMouseDown:e=>e.preventDefault(),onClick:e=>{if(!saving)setShowParticipantsDropdown(v=>!v);},\"aria-haspopup\":\"listbox\",\"aria-expanded\":showParticipantsDropdown,children:[/*#__PURE__*/_jsx(\"span\",{style:{color:form.participants.length?'var(--text)':'#aaa',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap',flex:1,maxWidth:'calc(100% - 2em)',display:'block'},children:(()=>{const joined=form.participants.join(', ');// Limit to ~32 chars, add ellipsis if longer\nif(joined.length>32){return joined.slice(0,32)+'...';}return joined||'Select participants...';})()}),/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:8,color:'#aaa',fontSize:'1.1em',pointerEvents:'none'},children:\"\\u25BC\"})]}),showParticipantsDropdown&&/*#__PURE__*/_jsx(\"div\",{className:\"participants-dropdown-list\",ref:dropdownListRef,style:{position:'absolute',left:0,right:0,top:'calc(100% + 8px)',zIndex:1001,background:'var(--card-bg)',border:'1.5px solid var(--accent)',borderRadius:10,boxShadow:'0 4px 24px #0005',minWidth:210,padding:'0.3rem 0',display:'flex',flexDirection:'column',gap:'0.2rem',maxHeight:220,overflowY:'auto'},onClick:e=>e.stopPropagation(),role:\"listbox\",children:empires.map((e,idx)=>/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"participants-dropdown-item\",style:{background:'none',border:'none',color:'var(--accent)',fontSize:'1.08rem',textAlign:'left',padding:'0.7rem 1.2rem',cursor:saving?'not-allowed':'pointer',borderRadius:7,transition:'background 0.15s, color 0.15s',width:'100%',display:'flex',alignItems:'center',gap:'0.7em',position:'relative',backgroundColor:form.participants.includes(e)?'rgba(0,191,255,0.10)':'transparent'},tabIndex:-1,onMouseDown:ev=>ev.preventDefault(),onClick:ev=>{ev.stopPropagation();if(!saving){setForm(f=>{const exists=f.participants.includes(e);return{...f,participants:exists?f.participants.filter(p=>p!==e):[...f.participants,e]};});}},children:[/*#__PURE__*/_jsx(\"span\",{style:{display:'inline-flex',alignItems:'center',justifyContent:'center',width:22,height:22,borderRadius:5,border:'1.5px solid var(--accent)',background:form.participants.includes(e)?'var(--accent)':'var(--primary-bg)',marginRight:10,transition:'background 0.15s, border 0.15s'},children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:form.participants.includes(e),readOnly:true,tabIndex:-1,style:{accentColor:'var(--accent)',width:18,height:18,margin:0,pointerEvents:'none'}})}),/*#__PURE__*/_jsx(\"span\",{style:{color:form.participants.includes(e)?'#fff':'var(--accent)',fontWeight:form.participants.includes(e)?600:400,flex:1,textAlign:'left'},children:e})]},e))})]}),/*#__PURE__*/_jsx(\"div\",{children:(account===null||account===void 0?void 0:account.username)===\"GameMaster\"&&/*#__PURE__*/_jsx(FormField,{label:\"Owner:\",name:\"owner\",as:\"select\",value:form.owner,onChange:e=>setForm(f=>({...f,owner:e.target.value})),options:Object.keys(accounts).map(acc=>({value:acc,label:acc})),disabled:saving})})]}),/*#__PURE__*/_jsx(FormField,{label:\"Content:\",name:\"content\",as:\"textarea\",value:form.content,onChange:e=>setForm(f=>({...f,content:e.target.value})),rows:7,required:true,disabled:saving}),error&&/*#__PURE__*/_jsx(ErrorMessage,{children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"treaty-form-actions\",children:[/*#__PURE__*/_jsx(ActionButton,{type:\"submit\",variant:\"primary\",className:\"empire-save-btn\",disabled:saving,children:isEdit?\"Save Changes\":\"Create Treaty\"}),/*#__PURE__*/_jsx(ActionButton,{type:\"button\",variant:\"secondary\",className:\"empire-back-btn\",onClick:onClose,disabled:saving,children:\"Cancel\"})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","TREATY_STATUS_OPTIONS","ActionButton","ModalOverlay","FormField","ErrorMessage","Dropdown","jsx","_jsx","jsxs","_jsxs","TreatyDialog","_ref","open","mode","data","onSave","onClose","error","saving","empires","accounts","account","form","setForm","title","content","participants","status","owner","username","showParticipantsDropdown","setShowParticipantsDropdown","dropdownBtnRef","dropdownListRef","handleClick","e","current","contains","target","document","addEventListener","removeEventListener","handleKey","key","isEdit","toggleParticipant","name","f","exists","includes","filter","p","children","onSubmit","preventDefault","style","display","gridTemplateColumns","gap","marginBottom","label","value","onChange","required","disabled","as","options","position","fontWeight","color","className","ref","tabIndex","userSelect","background","border","borderRadius","padding","minHeight","maxWidth","width","cursor","alignItems","justifyContent","overflow","onMouseDown","onClick","v","length","textOverflow","whiteSpace","flex","joined","join","slice","marginLeft","fontSize","pointerEvents","left","right","top","zIndex","boxShadow","minWidth","flexDirection","maxHeight","overflowY","stopPropagation","role","map","idx","type","textAlign","transition","backgroundColor","ev","height","marginRight","checked","readOnly","accentColor","margin","Object","keys","acc","rows","variant"],"sources":["C:/Users/Admin/Dokumente/Stellaris/project/StellarisRP-Site/src/components/TreatyDialog.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { TREATY_STATUS_OPTIONS } from '../utils/treatyStatusOptions';\r\nimport ActionButton from './ActionButton';\r\nimport ModalOverlay from './ModalOverlay';\r\nimport FormField from './FormField';\r\nimport { ErrorMessage } from './Messages';\r\nimport Dropdown from './Dropdown';\r\n\r\nexport default function TreatyDialog({ open, mode, data, onSave, onClose, error, saving, empires, accounts, account }) {\r\n    const [form, setForm] = useState(() => data ? { ...data } : {\r\n        title: '', content: '', participants: [], status: 'discussion', owner: account?.username || ''\r\n    });\r\n    const [showParticipantsDropdown, setShowParticipantsDropdown] = useState(false);\r\n    const dropdownBtnRef = useRef(null);\r\n    const dropdownListRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (data) setForm({ ...data });\r\n        else setForm({ title: '', content: '', participants: [], status: 'discussion', owner: account?.username || '' });\r\n    }, [data, open]);\r\n\r\n    useEffect(() => {\r\n        if (!showParticipantsDropdown) return;\r\n        function handleClick(e) {\r\n            if (\r\n                dropdownBtnRef.current &&\r\n                !dropdownBtnRef.current.contains(e.target) &&\r\n                dropdownListRef.current &&\r\n                !dropdownListRef.current.contains(e.target)\r\n            ) {\r\n                setShowParticipantsDropdown(false);\r\n            }\r\n        }\r\n        document.addEventListener('mousedown', handleClick);\r\n        return () => document.removeEventListener('mousedown', handleClick);\r\n    }, [showParticipantsDropdown]);\r\n\r\n    useEffect(() => {\r\n        if (!showParticipantsDropdown) return;\r\n        function handleKey(e) {\r\n            if (e.key === \"Escape\") setShowParticipantsDropdown(false);\r\n        }\r\n        document.addEventListener('keydown', handleKey);\r\n        return () => document.removeEventListener('keydown', handleKey);\r\n    }, [showParticipantsDropdown]);\r\n\r\n    if (!open) return null;\r\n\r\n    const isEdit = mode === 'edit';\r\n\r\n    function toggleParticipant(name) {\r\n        setForm(f => {\r\n            const exists = f.participants.includes(name);\r\n            return {\r\n                ...f,\r\n                participants: exists\r\n                    ? f.participants.filter(p => p !== name)\r\n                    : [...f.participants, name]\r\n            };\r\n        });\r\n    }\r\n\r\n    return (\r\n        <ModalOverlay onClose={onClose}>\r\n            <h2>{isEdit ? 'Edit Treaty' : 'New Treaty'}</h2>\r\n            <form onSubmit={e => { e.preventDefault(); onSave(form); }}>\r\n                <div style={{\r\n                    display: 'grid',\r\n                    gridTemplateColumns: '1fr 1fr',\r\n                    gap: '1.2rem',\r\n                    marginBottom: '1.2rem'\r\n                }}>\r\n                    <div>\r\n                        <FormField\r\n                            label=\"Title:\"\r\n                            name=\"title\"\r\n                            value={form.title}\r\n                            onChange={e => setForm(f => ({ ...f, title: e.target.value }))}\r\n                            required\r\n                            disabled={saving}\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <FormField\r\n                            label=\"Status:\"\r\n                            name=\"status\"\r\n                            as=\"select\"\r\n                            value={form.status}\r\n                            onChange={e => setForm(f => ({ ...f, status: e.target.value }))}\r\n                            options={TREATY_STATUS_OPTIONS}\r\n                            disabled={saving}\r\n                        />\r\n                    </div>\r\n                    <div style={{ position: 'relative' }}>\r\n                        <label style={{ fontWeight: 'bold', color: 'var(--accent)', marginBottom: 0.15 }}>\r\n                            Participants:\r\n                        </label>\r\n                        <div\r\n                            className=\"participants-dropdown\"\r\n                            ref={dropdownBtnRef}\r\n                            tabIndex={0}\r\n                            style={{\r\n                                userSelect: 'none',\r\n                                background: 'var(--primary-bg)',\r\n                                border: '1px solid var(--border)',\r\n                                borderRadius: 8,\r\n                                padding: '0.7rem 1rem',\r\n                                minHeight: '2.2rem',\r\n                                maxWidth: '100%',\r\n                                width: '100%',\r\n                                cursor: saving ? 'not-allowed' : 'pointer',\r\n                                marginBottom: '0.7rem',\r\n                                position: 'relative',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'space-between',\r\n                                overflow: 'hidden'\r\n                            }}\r\n                            onMouseDown={e => e.preventDefault()}\r\n                            onClick={e => {\r\n                                if (!saving) setShowParticipantsDropdown(v => !v);\r\n                            }}\r\n                            aria-haspopup=\"listbox\"\r\n                            aria-expanded={showParticipantsDropdown}\r\n                        >\r\n                            <span style={{\r\n                                color: form.participants.length ? 'var(--text)' : '#aaa',\r\n                                overflow: 'hidden',\r\n                                textOverflow: 'ellipsis',\r\n                                whiteSpace: 'nowrap',\r\n                                flex: 1,\r\n                                maxWidth: 'calc(100% - 2em)',\r\n                                display: 'block'\r\n                            }}>\r\n                                {(() => {\r\n                                    const joined = form.participants.join(', ');\r\n                                    // Limit to ~32 chars, add ellipsis if longer\r\n                                    if (joined.length > 32) {\r\n                                        return joined.slice(0, 32) + '...';\r\n                                    }\r\n                                    return joined || 'Select participants...';\r\n                                })()}\r\n                            </span>\r\n                            <span style={{ marginLeft: 8, color: '#aaa', fontSize: '1.1em', pointerEvents: 'none' }}>▼</span>\r\n                        </div>\r\n                        {showParticipantsDropdown && (\r\n                            <div\r\n                                className=\"participants-dropdown-list\"\r\n                                ref={dropdownListRef}\r\n                                style={{\r\n                                    position: 'absolute',\r\n                                    left: 0,\r\n                                    right: 0,\r\n                                    top: 'calc(100% + 8px)',\r\n                                    zIndex: 1001,\r\n                                    background: 'var(--card-bg)',\r\n                                    border: '1.5px solid var(--accent)',\r\n                                    borderRadius: 10,\r\n                                    boxShadow: '0 4px 24px #0005',\r\n                                    minWidth: 210,\r\n                                    padding: '0.3rem 0',\r\n                                    display: 'flex',\r\n                                    flexDirection: 'column',\r\n                                    gap: '0.2rem',\r\n                                    maxHeight: 220,\r\n                                    overflowY: 'auto'\r\n                                }}\r\n                                onClick={e => e.stopPropagation()}\r\n                                role=\"listbox\"\r\n                            >\r\n                                {empires.map((e, idx) => (\r\n                                    <button\r\n                                        key={e}\r\n                                        type=\"button\"\r\n                                        className=\"participants-dropdown-item\"\r\n                                        style={{\r\n                                            background: 'none',\r\n                                            border: 'none',\r\n                                            color: 'var(--accent)',\r\n                                            fontSize: '1.08rem',\r\n                                            textAlign: 'left',\r\n                                            padding: '0.7rem 1.2rem',\r\n                                            cursor: saving ? 'not-allowed' : 'pointer',\r\n                                            borderRadius: 7,\r\n                                            transition: 'background 0.15s, color 0.15s',\r\n                                            width: '100%',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '0.7em',\r\n                                            position: 'relative',\r\n                                            backgroundColor: form.participants.includes(e) ? 'rgba(0,191,255,0.10)' : 'transparent'\r\n                                        }}\r\n                                        tabIndex={-1}\r\n                                        onMouseDown={ev => ev.preventDefault()}\r\n                                        onClick={ev => {\r\n                                            ev.stopPropagation();\r\n                                            if (!saving) {\r\n                                                setForm(f => {\r\n                                                    const exists = f.participants.includes(e);\r\n                                                    return {\r\n                                                        ...f,\r\n                                                        participants: exists\r\n                                                            ? f.participants.filter(p => p !== e)\r\n                                                            : [...f.participants, e]\r\n                                                    };\r\n                                                });\r\n                                            }\r\n                                        }}\r\n                                    >\r\n                                        <span style={{\r\n                                            display: 'inline-flex',\r\n                                            alignItems: 'center',\r\n                                            justifyContent: 'center',\r\n                                            width: 22,\r\n                                            height: 22,\r\n                                            borderRadius: 5,\r\n                                            border: '1.5px solid var(--accent)',\r\n                                            background: form.participants.includes(e) ? 'var(--accent)' : 'var(--primary-bg)',\r\n                                            marginRight: 10,\r\n                                            transition: 'background 0.15s, border 0.15s'\r\n                                        }}>\r\n                                            <input\r\n                                                type=\"checkbox\"\r\n                                                checked={form.participants.includes(e)}\r\n                                                readOnly\r\n                                                tabIndex={-1}\r\n                                                style={{\r\n                                                    accentColor: 'var(--accent)',\r\n                                                    width: 18,\r\n                                                    height: 18,\r\n                                                    margin: 0,\r\n                                                    pointerEvents: 'none'\r\n                                                }}\r\n                                            />\r\n                                        </span>\r\n                                        <span style={{\r\n                                            color: form.participants.includes(e) ? '#fff' : 'var(--accent)',\r\n                                            fontWeight: form.participants.includes(e) ? 600 : 400,\r\n                                            flex: 1,\r\n                                            textAlign: 'left'\r\n                                        }}>\r\n                                            {e}\r\n                                        </span>\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    <div>\r\n                        {account?.username === \"GameMaster\" && (\r\n                            <FormField\r\n                                label=\"Owner:\"\r\n                                name=\"owner\"\r\n                                as=\"select\"\r\n                                value={form.owner}\r\n                                onChange={e => setForm(f => ({ ...f, owner: e.target.value }))}\r\n                                options={Object.keys(accounts).map(acc => ({ value: acc, label: acc }))}\r\n                                disabled={saving}\r\n                            />\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                <FormField\r\n                    label=\"Content:\"\r\n                    name=\"content\"\r\n                    as=\"textarea\"\r\n                    value={form.content}\r\n                    onChange={e => setForm(f => ({ ...f, content: e.target.value }))}\r\n                    rows={7}\r\n                    required\r\n                    disabled={saving}\r\n                />\r\n                {error && <ErrorMessage>{error}</ErrorMessage>}\r\n                <div className=\"treaty-form-actions\">\r\n                    <ActionButton type=\"submit\" variant=\"primary\" className=\"empire-save-btn\" disabled={saving}>\r\n                        {isEdit ? \"Save Changes\" : \"Create Treaty\"}\r\n                    </ActionButton>\r\n                    <ActionButton type=\"button\" variant=\"secondary\" className=\"empire-back-btn\" onClick={onClose} disabled={saving}>Cancel</ActionButton>\r\n                </div>\r\n            </form>\r\n        </ModalOverlay>\r\n    );\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}