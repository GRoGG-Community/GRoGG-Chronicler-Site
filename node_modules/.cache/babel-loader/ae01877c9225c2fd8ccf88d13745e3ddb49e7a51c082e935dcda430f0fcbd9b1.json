{"ast":null,"code":"import React,{useRef,useEffect}from'react';import ActionButton from'./ActionButton';import ListContainer from'./ListContainer';import{EmptyMessage}from'./Messages';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MessageList(_ref){let{messages,selected,account,gmPermissions,handleDeleteMessage}=_ref;const messagesEndRef=useRef(null);useEffect(()=>{if(!selected)return;if(messagesEndRef.current){messagesEndRef.current.scrollIntoView({behavior:'auto'});}},[messages,selected]);if(!selected||!messages)return null;return/*#__PURE__*/_jsx(ListContainer,{emptyMessage:/*#__PURE__*/_jsx(EmptyMessage,{children:\"No messages yet.\"}),children:/*#__PURE__*/_jsxs(\"ul\",{className:\"messages-list\",children:[messages.map((msg,i)=>{const[partnerA,partnerB]=selected.split('|');let partnerClass='';if(msg.author===partnerA)partnerClass='message-partnerA';else if(msg.author===partnerB)partnerClass='message-partnerB';return/*#__PURE__*/_jsxs(\"li\",{className:`message-item ${partnerClass}`,style:{display:'flex',alignItems:'stretch',justifyContent:'flex-start',gap:'0.7rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,minWidth:0,display:'flex',flexDirection:'column',gap:'0.15rem',justifyContent:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"message-meta\",style:{marginBottom:0},children:[/*#__PURE__*/_jsx(\"span\",{className:\"message-author\",children:msg.author}),/*#__PURE__*/_jsx(\"small\",{className:\"message-date\",children:new Date(msg.timestamp).toLocaleString()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"message-text\",children:msg.text})]}),account&&account.username===\"GameMaster\"&&gmPermissions.canDeleteMessages&&/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',minWidth:'2.5em',paddingLeft:'0.5em'},children:/*#__PURE__*/_jsx(ActionButton,{variant:\"danger\",title:\"Delete message\",style:{background:'none',border:'none',color:'#ff4d4d',cursor:'pointer',fontSize:'1.3em',display:'flex',alignItems:'center',height:'2.2em'},onClick:e=>{e.stopPropagation();handleDeleteMessage(selected,i);},children:/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"Delete\",children:\"\\uD83D\\uDDD1\"})})})]},i);}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]})});}","map":{"version":3,"names":["React","useRef","useEffect","ActionButton","ListContainer","EmptyMessage","jsx","_jsx","jsxs","_jsxs","MessageList","_ref","messages","selected","account","gmPermissions","handleDeleteMessage","messagesEndRef","current","scrollIntoView","behavior","emptyMessage","children","className","map","msg","i","partnerA","partnerB","split","partnerClass","author","style","display","alignItems","justifyContent","gap","flex","minWidth","flexDirection","marginBottom","Date","timestamp","toLocaleString","text","username","canDeleteMessages","paddingLeft","variant","title","background","border","color","cursor","fontSize","height","onClick","e","stopPropagation","role","ref"],"sources":["C:/Users/Admin/Dokumente/Stellaris/project/StellarisRP-Site/src/components/MessageList.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\r\nimport ActionButton from './ActionButton';\r\nimport ListContainer from './ListContainer';\r\nimport { EmptyMessage } from './Messages';\r\n\r\nexport default function MessageList({\r\n    messages,\r\n    selected,\r\n    account,\r\n    gmPermissions,\r\n    handleDeleteMessage\r\n}) {\r\n    const messagesEndRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (!selected) return;\r\n        if (messagesEndRef.current) {\r\n            messagesEndRef.current.scrollIntoView({ behavior: 'auto' });\r\n        }\r\n    }, [messages, selected]);\r\n\r\n    if (!selected || !messages) return null;\r\n\r\n    return (\r\n        <ListContainer emptyMessage={<EmptyMessage>No messages yet.</EmptyMessage>}>\r\n            <ul className=\"messages-list\">\r\n                {messages.map((msg, i) => {\r\n                    const [partnerA, partnerB] = selected.split('|');\r\n                    let partnerClass = '';\r\n                    if (msg.author === partnerA) partnerClass = 'message-partnerA';\r\n                    else if (msg.author === partnerB) partnerClass = 'message-partnerB';\r\n                    return (\r\n                        <li\r\n                            key={i}\r\n                            className={`message-item ${partnerClass}`}\r\n                            style={{\r\n                                display: 'flex',\r\n                                alignItems: 'stretch',\r\n                                justifyContent: 'flex-start',\r\n                                gap: '0.7rem'\r\n                            }}\r\n                        >\r\n                            <div style={{\r\n                                flex: 1,\r\n                                minWidth: 0,\r\n                                display: 'flex',\r\n                                flexDirection: 'column',\r\n                                gap: '0.15rem',\r\n                                justifyContent: 'center'\r\n                            }}>\r\n                                <div className=\"message-meta\" style={{marginBottom: 0}}>\r\n                                    <span className=\"message-author\">{msg.author}</span>\r\n                                    <small className=\"message-date\">{new Date(msg.timestamp).toLocaleString()}</small>\r\n                                </div>\r\n                                <div className=\"message-text\">{msg.text}</div>\r\n                            </div>\r\n                            {account && account.username === \"GameMaster\" && gmPermissions.canDeleteMessages && (\r\n                                <div style={{\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    minWidth: '2.5em',\r\n                                    paddingLeft: '0.5em'\r\n                                }}>\r\n                                    <ActionButton\r\n                                        variant=\"danger\"\r\n                                        title=\"Delete message\"\r\n                                        style={{\r\n                                            background: 'none',\r\n                                            border: 'none',\r\n                                            color: '#ff4d4d',\r\n                                            cursor: 'pointer',\r\n                                            fontSize: '1.3em',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            height: '2.2em'\r\n                                        }}\r\n                                        onClick={e => {\r\n                                            e.stopPropagation();\r\n                                            handleDeleteMessage(selected, i);\r\n                                        }}\r\n                                    >\r\n                                        <span role=\"img\" aria-label=\"Delete\">&#128465;</span>\r\n                                    </ActionButton>\r\n                                </div>\r\n                            )}\r\n                        </li>\r\n                    );\r\n                })}\r\n                <div ref={messagesEndRef} />\r\n            </ul>\r\n        </ListContainer>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}